{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///Users/janinduhansaka/Documents/click.aiesec.my/src/components/Dashboard/AnalyticsDashboard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/Dashboard/AnalyticsDashboard.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/Dashboard/AnalyticsDashboard.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAmT,GAChV,iFACA","ignoreList":[0]}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/janinduhansaka/Documents/click.aiesec.my/src/components/Dashboard/AnalyticsDashboard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/Dashboard/AnalyticsDashboard.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/Dashboard/AnalyticsDashboard.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA+R,GAC5T,6DACA","ignoreList":[0]}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Users/janinduhansaka/Documents/click.aiesec.my/src/app/dashboard/page.tsx"],"sourcesContent":["import { Metadata } from \"next\";\nimport { getServerSession } from \"next-auth\";\nimport { prisma } from \"@/utils/prismaDB\";\nimport { authOptions } from \"@/utils/auth\";\nimport AnalyticsDashboard from \"@/components/Dashboard/AnalyticsDashboard\";\n\nexport const metadata: Metadata = {\n  title: \"Analytics | click.aiesec.my\",\n  description: \"Comprehensive analytics for your shortened links\",\n};\n\nexport default async function DashboardPage() {\n  const session = await getServerSession(authOptions);\n  const isAdmin = session?.user?.role === \"ADMIN\";\n  const whereLinks = isAdmin ? {} : { userId: session?.user?.id as string };\n  const clickWhere = isAdmin ? {} : { shortLink: { userId: session?.user?.id } };\n\n  const now = new Date();\n  const last24h = new Date(now.getTime() - 24 * 60 * 60 * 1000);\n  const last7days = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n  const last30days = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\n\n  const [\n    linkCount,\n    totalClicks,\n    clicksLast24h,\n    clicksLast7days,\n    topLinks,\n    clicksByCountry,\n    clicksByDevice,\n    clicksByBrowser,\n    clicksByOs,\n    recentClicks,\n  ] = await Promise.all([\n    prisma.shortLink.count({ where: whereLinks }),\n    prisma.clickEvent.count({ where: clickWhere }),\n    prisma.clickEvent.count({\n      where: { ...clickWhere, createdAt: { gte: last24h } },\n    }),\n    prisma.clickEvent.count({\n      where: { ...clickWhere, createdAt: { gte: last7days } },\n    }),\n    prisma.shortLink.findMany({\n      where: whereLinks,\n      take: 10,\n      orderBy: { clickEvents: { _count: \"desc\" } },\n      include: {\n        _count: { select: { clickEvents: true } },\n      },\n    }),\n    prisma.clickEvent.groupBy({\n      by: [\"country\"],\n      where: { ...clickWhere, country: { not: null } },\n      _count: true,\n      orderBy: { _count: { country: \"desc\" } },\n      take: 10,\n    }),\n    prisma.clickEvent.groupBy({\n      by: [\"device\"],\n      where: { ...clickWhere, device: { not: null } },\n      _count: true,\n      orderBy: { _count: { device: \"desc\" } },\n    }),\n    prisma.clickEvent.groupBy({\n      by: [\"browser\"],\n      where: { ...clickWhere, browser: { not: null } },\n      _count: true,\n      orderBy: { _count: { browser: \"desc\" } },\n      take: 5,\n    }),\n    prisma.clickEvent.groupBy({\n      by: [\"os\"],\n      where: { ...clickWhere, os: { not: null } },\n      _count: true,\n      orderBy: { _count: { os: \"desc\" } },\n      take: 5,\n    }),\n    prisma.clickEvent.findMany({\n      where: clickWhere,\n      take: 20,\n      orderBy: { createdAt: \"desc\" },\n      include: {\n        shortLink: {\n          select: { slug: true, title: true },\n        },\n      },\n    }),\n  ]);\n\n  const analyticsData = {\n    overview: {\n      linkCount,\n      totalClicks,\n      clicksLast24h,\n      clicksLast7days,\n      avgClicksPerLink: linkCount > 0 ? Math.round(totalClicks / linkCount) : 0,\n    },\n    topLinks: topLinks.map((link) => ({\n      id: link.id,\n      slug: link.slug,\n      title: link.title || link.slug,\n      clicks: link._count.clickEvents,\n    })),\n    locations: clicksByCountry.map((item) => ({\n      country: item.country || \"Unknown\",\n      clicks: item._count,\n    })),\n    devices: clicksByDevice.map((item) => ({\n      device: item.device || \"Unknown\",\n      clicks: item._count,\n    })),\n    browsers: clicksByBrowser.map((item) => ({\n      browser: item.browser || \"Unknown\",\n      clicks: item._count,\n    })),\n    operatingSystems: clicksByOs.map((item) => ({\n      os: item.os || \"Unknown\",\n      clicks: item._count,\n    })),\n    recentActivity: recentClicks.map((click) => ({\n      id: click.id,\n      slug: click.shortLink.slug,\n      title: click.shortLink.title,\n      country: click.country,\n      city: click.city,\n      device: click.device,\n      browser: click.browser,\n      os: click.os,\n      timestamp: click.createdAt.toISOString(),\n    })),\n  };\n\n  return <AnalyticsDashboard data={analyticsData} />;\n}\n"],"names":[],"mappings":"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"}}]
}