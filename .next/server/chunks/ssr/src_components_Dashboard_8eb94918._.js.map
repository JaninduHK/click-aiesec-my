{"version":3,"sources":["../../../../src/components/Dashboard/CopyButton.tsx","../../../../src/components/Dashboard/ShortnerForm.tsx"],"sourcesContent":["\"use client\";\n\nimport toast from \"react-hot-toast\";\n\ntype Props = {\n  value: string;\n  label?: string;\n  className?: string;\n};\n\nconst CopyButton = ({ value, label = \"Copy\", className }: Props) => {\n  const handleCopy = async () => {\n    try {\n      await navigator.clipboard.writeText(value);\n      toast.success(\"Copied to clipboard\");\n    } catch (error: any) {\n      toast.error(error?.message || \"Unable to copy\");\n    }\n  };\n\n  return (\n    <button\n      onClick={handleCopy}\n      className={`rounded-lg border border-stroke px-3 py-1 text-xs font-medium hover:border-primary hover:text-primary dark:border-dark-3 dark:hover:border-primary ${className || \"\"}`}\n    >\n      {label}\n    </button>\n  );\n};\n\nexport default CopyButton;\n","\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport CopyButton from \"./CopyButton\";\n\nexport default function ShortnerForm() {\n  const router = useRouter();\n  const [formData, setFormData] = useState({\n    destination: \"\",\n    slug: \"\",\n    title: \"\",\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [createdLink, setCreatedLink] = useState<string | null>(null);\n\n  const generateSlug = () => {\n    const randomSlug = Math.random().toString(36).substring(2, 8);\n    setFormData({ ...formData, slug: randomSlug });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(\"\");\n\n    try {\n      // Generate random slug if not provided\n      const slugToUse = formData.slug || Math.random().toString(36).substring(2, 8);\n\n      const response = await fetch(\"/api/shortlinks\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          ...formData,\n          slug: slugToUse,\n        }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || \"Failed to create link\");\n      }\n\n      setCreatedLink(`https://click.aiesec.my/${data.slug}`);\n      setFormData({ destination: \"\", slug: \"\", title: \"\" });\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"grid grid-cols-1 gap-9\">\n      {/* Form */}\n      <div className=\"flex flex-col gap-9\">\n        <div className=\"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark\">\n          <div className=\"border-b border-stroke px-6.5 py-4 dark:border-strokedark\">\n            <h3 className=\"font-medium text-black dark:text-white\">\n              Link Details\n            </h3>\n          </div>\n          <form onSubmit={handleSubmit}>\n            <div className=\"p-6.5\">\n              {error && (\n                <div className=\"mb-4 rounded-md bg-danger bg-opacity-10 p-4\">\n                  <p className=\"text-sm text-danger\">{error}</p>\n                </div>\n              )}\n\n              {createdLink && (\n                <div className=\"mb-6 rounded-md border border-success bg-success bg-opacity-10 p-4\">\n                  <p className=\"mb-2 text-sm font-medium text-success\">\n                    Link created successfully!\n                  </p>\n                  <div className=\"flex items-center gap-2\">\n                    <input\n                      type=\"text\"\n                      value={createdLink}\n                      readOnly\n                      className=\"flex-1 rounded-md border border-stroke bg-white px-4 py-2 text-black dark:border-strokedark dark:bg-boxdark dark:text-white\"\n                    />\n                    <CopyButton value={createdLink} />\n                  </div>\n                  <div className=\"mt-4 flex gap-2\">\n                    <button\n                      type=\"button\"\n                      onClick={() => router.push(\"/dashboard/links\")}\n                      className=\"rounded-md border border-stroke px-4 py-2 text-sm font-medium text-black hover:shadow-1 dark:border-strokedark dark:text-white\"\n                    >\n                      View All Links\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setCreatedLink(null)}\n                      className=\"rounded-md bg-primary px-4 py-2 text-sm font-medium text-white hover:bg-opacity-90\"\n                    >\n                      Create Another\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              <div className=\"mb-4.5\">\n                <label className=\"mb-2.5 block text-black dark:text-white\">\n                  Destination URL <span className=\"text-meta-1\">*</span>\n                </label>\n                <input\n                  type=\"url\"\n                  required\n                  placeholder=\"https://example.com/your-long-url\"\n                  value={formData.destination}\n                  onChange={(e) =>\n                    setFormData({ ...formData, destination: e.target.value })\n                  }\n                  className=\"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 py-3 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary\"\n                />\n              </div>\n\n              <div className=\"mb-4.5\">\n                <label className=\"mb-2.5 block text-black dark:text-white\">\n                  Custom Slug (Optional)\n                </label>\n                <div className=\"flex gap-2\">\n                  <div className=\"relative flex-1\">\n                    <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-bodydark\">\n                      /\n                    </span>\n                    <input\n                      type=\"text\"\n                      placeholder=\"custom-slug\"\n                      value={formData.slug}\n                      onChange={(e) =>\n                        setFormData({\n                          ...formData,\n                          slug: e.target.value.toLowerCase().replace(/[^a-z0-9-]/g, \"\"),\n                        })\n                      }\n                      className=\"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 pl-8 pr-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary\"\n                    />\n                  </div>\n                  <button\n                    type=\"button\"\n                    onClick={generateSlug}\n                    className=\"rounded border border-stroke bg-gray px-4 py-2 text-sm font-medium text-black hover:shadow-1 dark:border-strokedark dark:bg-meta-4 dark:text-white\"\n                  >\n                    Generate\n                  </button>\n                </div>\n                <p className=\"mt-1 text-xs text-bodydark\">\n                  Leave empty to auto-generate a random slug\n                </p>\n              </div>\n\n              <div className=\"mb-6\">\n                <label className=\"mb-2.5 block text-black dark:text-white\">\n                  Title (Optional)\n                </label>\n                <input\n                  type=\"text\"\n                  placeholder=\"My Campaign Link\"\n                  value={formData.title}\n                  onChange={(e) =>\n                    setFormData({ ...formData, title: e.target.value })\n                  }\n                  className=\"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 py-3 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary\"\n                />\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={loading || !formData.destination}\n                className=\"flex w-full justify-center rounded bg-primary p-3 font-medium text-gray disabled:cursor-not-allowed disabled:opacity-50\"\n              >\n                {loading ? \"Creating...\" : \"Create Short Link\"}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}