{"version":3,"sources":["../../../../src/components/Dashboard/ProfileForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\n\ninterface User {\n  id?: string;\n  name?: string | null;\n  email?: string | null;\n  lc?: string | null;\n  designation?: string | null;\n}\n\nexport default function ProfileForm({ user }: { user?: User }) {\n  const router = useRouter();\n  const [formData, setFormData] = useState({\n    name: user?.name || \"\",\n    lc: user?.lc || \"\",\n    designation: user?.designation || \"\",\n  });\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState<{ type: \"success\" | \"error\"; text: string } | null>(null);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage(null);\n\n    try {\n      const response = await fetch(\"/api/profile\", {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(formData),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to update profile\");\n      }\n\n      const data = await response.json();\n\n      // Update local state with the response data to sync the \"Current Information\" widget\n      if (data.user) {\n        setFormData({\n          name: data.user.name || \"\",\n          lc: data.user.lc || \"\",\n          designation: data.user.designation || \"\",\n        });\n      }\n\n      setMessage({ type: \"success\", text: \"Profile updated successfully!\" });\n      router.refresh();\n    } catch (error) {\n      setMessage({ type: \"error\", text: \"Failed to update profile\" });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"grid grid-cols-1 gap-9 lg:grid-cols-2\">\n      {/* Profile Form */}\n      <div className=\"flex flex-col gap-9\">\n        <div className=\"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark\">\n          <div className=\"border-b border-stroke px-6.5 py-4 dark:border-strokedark\">\n            <h3 className=\"font-medium text-black dark:text-white\">\n              Personal Information\n            </h3>\n          </div>\n          <form onSubmit={handleSubmit}>\n            <div className=\"p-6.5\">\n              {message && (\n                <div\n                  className={`mb-4 rounded-md p-4 ${\n                    message.type === \"success\"\n                      ? \"bg-success bg-opacity-10 text-success\"\n                      : \"bg-danger bg-opacity-10 text-danger\"\n                  }`}\n                >\n                  <p className=\"text-sm\">{message.text}</p>\n                </div>\n              )}\n\n              <div className=\"mb-4.5\">\n                <label className=\"mb-2.5 block text-black dark:text-white\">\n                  Full Name <span className=\"text-meta-1\">*</span>\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  placeholder=\"Enter your full name\"\n                  value={formData.name}\n                  onChange={(e) =>\n                    setFormData({ ...formData, name: e.target.value })\n                  }\n                  className=\"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 py-3 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary\"\n                />\n              </div>\n\n              <div className=\"mb-4.5\">\n                <label className=\"mb-2.5 block text-black dark:text-white\">\n                  Email Address\n                </label>\n                <input\n                  type=\"email\"\n                  disabled\n                  value={user?.email || \"\"}\n                  className=\"w-full rounded border-[1.5px] border-stroke bg-whiter px-5 py-3 font-medium outline-none dark:border-form-strokedark dark:bg-form-input\"\n                />\n                <p className=\"mt-1 text-xs text-bodydark\">\n                  Email cannot be changed\n                </p>\n              </div>\n\n              <div className=\"mb-4.5\">\n                <label className=\"mb-2.5 block text-black dark:text-white\">\n                  LC (Local Committee)\n                </label>\n                <input\n                  type=\"text\"\n                  placeholder=\"e.g., AIESEC in Malaysia\"\n                  value={formData.lc}\n                  onChange={(e) =>\n                    setFormData({ ...formData, lc: e.target.value })\n                  }\n                  className=\"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 py-3 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary\"\n                />\n              </div>\n\n              <div className=\"mb-6\">\n                <label className=\"mb-2.5 block text-black dark:text-white\">\n                  Designation\n                </label>\n                <input\n                  type=\"text\"\n                  placeholder=\"e.g., Vice President Marketing\"\n                  value={formData.designation}\n                  onChange={(e) =>\n                    setFormData({ ...formData, designation: e.target.value })\n                  }\n                  className=\"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 py-3 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary\"\n                />\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"flex w-full justify-center rounded bg-primary p-3 font-medium text-gray disabled:cursor-not-allowed disabled:opacity-50\"\n              >\n                {loading ? \"Updating...\" : \"Update Profile\"}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n\n      {/* Profile Info Card */}\n      <div className=\"flex flex-col gap-9\">\n        <div className=\"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark\">\n          <div className=\"border-b border-stroke px-6.5 py-4 dark:border-strokedark\">\n            <h3 className=\"font-medium text-black dark:text-white\">\n              Current Information\n            </h3>\n          </div>\n          <div className=\"p-6.5\">\n            <div className=\"mb-5\">\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"flex h-14 w-14 items-center justify-center rounded-full bg-meta-2 dark:bg-meta-4\">\n                  <svg\n                    className=\"fill-primary dark:fill-white\"\n                    width=\"28\"\n                    height=\"28\"\n                    viewBox=\"0 0 28 28\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path d=\"M14 14C17.866 14 21 10.866 21 7C21 3.13401 17.866 0 14 0C10.134 0 7 3.13401 7 7C7 10.866 10.134 14 14 14Z\" />\n                    <path d=\"M14 16.625C8.31878 16.625 3.71875 20.5781 3.71875 25.375C3.71875 26.2719 4.44685 27 5.34375 27H22.6562C23.5531 27 24.2812 26.2719 24.2812 25.375C24.2812 20.5781 19.6812 16.625 14 16.625Z\" />\n                  </svg>\n                </div>\n                <div>\n                  <p className=\"text-sm text-bodydark\">Name</p>\n                  <p className=\"font-medium text-black dark:text-white\">\n                    {formData.name || \"Not set\"}\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"flex h-14 w-14 items-center justify-center rounded-full bg-meta-2 dark:bg-meta-4\">\n                  <svg\n                    className=\"fill-primary dark:fill-white\"\n                    width=\"28\"\n                    height=\"28\"\n                    viewBox=\"0 0 28 28\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path d=\"M23.625 4.8125H4.375C3.16406 4.8125 2.1875 5.78906 2.1875 7V21C2.1875 22.2109 3.16406 23.1875 4.375 23.1875H23.625C24.8359 23.1875 25.8125 22.2109 25.8125 21V7C25.8125 5.78906 24.8359 4.8125 23.625 4.8125ZM23.625 7L14 13.5625L4.375 7H23.625ZM23.625 21H4.375V9.625L14 16.1875L23.625 9.625V21Z\" />\n                  </svg>\n                </div>\n                <div>\n                  <p className=\"text-sm text-bodydark\">Email</p>\n                  <p className=\"font-medium text-black dark:text-white\">\n                    {user?.email}\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"flex h-14 w-14 items-center justify-center rounded-full bg-meta-2 dark:bg-meta-4\">\n                  <svg\n                    className=\"fill-primary dark:fill-white\"\n                    width=\"28\"\n                    height=\"28\"\n                    viewBox=\"0 0 28 28\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path d=\"M14 0C8.47715 0 4 4.47715 4 10C4 16.25 14 28 14 28C14 28 24 16.25 24 10C24 4.47715 19.5228 0 14 0ZM14 13.5C12.067 13.5 10.5 11.933 10.5 10C10.5 8.067 12.067 6.5 14 6.5C15.933 6.5 17.5 8.067 17.5 10C17.5 11.933 15.933 13.5 14 13.5Z\" />\n                  </svg>\n                </div>\n                <div>\n                  <p className=\"text-sm text-bodydark\">Local Committee</p>\n                  <p className=\"font-medium text-black dark:text-white\">\n                    {formData.lc || \"Not set\"}\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-center gap-3\">\n                <div className=\"flex h-14 w-14 items-center justify-center rounded-full bg-meta-2 dark:bg-meta-4\">\n                  <svg\n                    className=\"fill-primary dark:fill-white\"\n                    width=\"28\"\n                    height=\"28\"\n                    viewBox=\"0 0 28 28\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path d=\"M24 4H20V2C20 1.44772 19.5523 1 19 1H17C16.4477 1 16 1.44772 16 2V4H12V2C12 1.44772 11.5523 1 11 1H9C8.44772 1 8 1.44772 8 2V4H4C2.89543 4 2 4.89543 2 6V24C2 25.1046 2.89543 26 4 26H24C25.1046 26 26 25.1046 26 24V6C26 4.89543 25.1046 4 24 4ZM24 24H4V10H24V24ZM24 8H4V6H8V7C8 7.55228 8.44772 8 9 8H11C11.5523 8 12 7.55228 12 7V6H16V7C16 7.55228 16.4477 8 17 8H19C19.5523 8 20 7.55228 20 7V6H24V8Z\" />\n                  </svg>\n                </div>\n                <div>\n                  <p className=\"text-sm text-bodydark\">Designation</p>\n                  <p className=\"font-medium text-black dark:text-white\">\n                    {formData.designation || \"Not set\"}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}