{"version":3,"sources":["../../../../src/components/Dashboard/LinksTable.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/dashboard/links/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/Dashboard/LinksTable.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/Dashboard/LinksTable.tsx\",\n    \"default\",\n);\n","import { Metadata } from \"next\";\nimport { getServerSession } from \"next-auth\";\nimport { prisma } from \"@/utils/prismaDB\";\nimport { authOptions } from \"@/utils/auth\";\nimport LinksTable from \"@/components/Dashboard/LinksTable\";\n\nexport const metadata: Metadata = {\n  title: \"Links | click.aiesec.my\",\n  description: \"Manage your shortened links\",\n};\n\nexport default async function LinksPage() {\n  const session = await getServerSession(authOptions);\n  const isAdmin = session?.user?.role === \"ADMIN\";\n  const whereLinks = isAdmin ? {} : { userId: session?.user?.id as string };\n\n  const links = await prisma.shortLink.findMany({\n    where: whereLinks,\n    include: {\n      user: { select: { id: true, name: true, email: true, lc: true } },\n      _count: { select: { clickEvents: true } },\n    },\n    orderBy: { createdAt: \"desc\" },\n  });\n\n  const serializedLinks = links.map((link) => ({\n    id: link.id,\n    slug: link.slug,\n    destination: link.destination,\n    title: link.title,\n    isActive: link.isActive,\n    clickCount: link._count.clickEvents,\n    createdAt: link.createdAt.toISOString(),\n    updatedAt: link.updatedAt.toISOString(),\n    user: isAdmin ? link.user : undefined,\n  }));\n\n  return <LinksTable initialLinks={serializedLinks} isAdmin={isAdmin} />;\n}\n"],"names":[],"mappings":"qWAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,ySAA2S,EACxU,wEACA,8DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAU,AAAJ,MAAU,qRAAuR,EACpT,oDACA,0ICJJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,kBAOe,eAAe,IAC5B,IAAM,EAAU,MAAM,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,EAAA,WAAW,EAC5C,EAAU,GAAS,MAAM,OAAS,QAClC,EAAa,EAAU,CAAC,EAAI,CAAE,OAAQ,GAAS,MAAM,EAAa,EAWlE,EATQ,AASU,OATJ,EAAA,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,CAC5C,MAAO,EACP,QAAS,CACP,KAAM,CAAE,OAAQ,CAAE,IAAI,EAAM,MAAM,EAAM,OAAO,EAAM,IAAI,CAAK,CAAE,EAChE,OAAQ,CAAE,OAAQ,CAAE,aAAa,CAAK,CAAE,CAC1C,EACA,QAAS,CAAE,UAAW,MAAO,CAC/B,EAAA,EAE8B,GAAG,CAAC,AAAC,IAAU,CAC3C,EAD0C,CACtC,EAAK,EAAE,CACX,KAAM,EAAK,IAAI,CACf,YAAa,EAAK,WAAW,CAC7B,MAAO,EAAK,KAAK,CACjB,SAAU,EAAK,QAAQ,CACvB,WAAY,EAAK,MAAM,CAAC,WAAW,CACnC,UAAW,EAAK,SAAS,CAAC,WAAW,GACrC,UAAW,EAAK,SAAS,CAAC,WAAW,GACrC,KAAM,EAAU,EAAK,IAAI,MAAG,EAC9B,CAAC,EAED,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CAAC,aAAc,EAAiB,QAAS,GAC7D,8DAhCkC,CAChC,MAAO,0BACP,YAAa,6BACf","ignoreList":[0]}